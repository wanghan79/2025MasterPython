时序知识图谱补全项目说明
项目概述
本项目是一个时序知识图谱补全 (Temporal Knowledge Base Completion, TKBC) 系统，旨在处理和分析包含时间维度的知识图谱数据，并通过深度学习模型预测缺失的三元组。项目包含两大核心部分：数据集预处理和 LCGE (Latent Contextual Graph Embedding) 模型训练，支持对 ICEWS05-15 和 wiki12K 等标准时序知识图谱数据集的处理与建模。
技术背景
知识图谱是一种以图结构表示实体及其关系的知识库，而时序知识图谱在传统知识图谱基础上增加了时间维度，每个三元组都与一个时间戳或时间间隔相关联。时序知识图谱补全任务旨在根据已有三元组预测缺失的实体或关系，这在事件预测、趋势分析等领域具有广泛应用。

LCGE 模型是一种结合了时间上下文和逻辑规则的知识图谱嵌入模型，通过复数空间表示实体和关系，能够有效捕捉时序知识图谱中的动态变化和逻辑依赖关系。
功能特点
多数据集支持：
支持 ICEWS05-15 数据集 (2005-2015 年国际危机事件数据库)
支持 wiki12K 数据集 (包含时间间隔信息的维基百科知识图谱)
完整的预处理流程：
实体、关系和时间戳的 ID 映射
训练 / 验证 / 测试集的处理与保存
过滤列表创建 (用于评估时的负样本过滤)
时间间隔处理 (针对 wiki12K 数据集)
先进的 LCGE 模型：
动态和静态嵌入结合的表示学习
时间感知的关系表示
逻辑规则约束集成
复数空间中的张量运算
高效的训练系统：
批量训练与验证
多种正则化方法 (Embedding 正则化、时间正则化、规则正则化)
早停机制和学习率调度
模型保存与加载
数据集处理
数据格式要求
ICEWS05-15 格式：每行一个三元组，格式为lhs\trel\trhs\ttimestamp
wiki12K 格式：每行一个带时间间隔的三元组，格式为lhs\trel\trhs\tbegin\tend
预处理流程
数据读取与解析：读取原始数据文件并解析为实体、关系和时间戳
ID 映射创建：为实体、关系和时间戳创建唯一 ID 映射
数据转换：将原始数据转换为 ID 表示的三元组
过滤列表生成：创建用于评估的过滤列表，排除已知正确的三元组
时间处理：
对 ICEWS 数据集处理时间戳
对 wiki12K 数据集处理时间间隔，包括完整间隔、半间隔和点事件
模型架构
LCGE 模型是一个时间感知的知识图谱嵌入模型，主要特点：

嵌入层：
实体嵌入层 (entity_emb)
关系嵌入层 (relation_emb)
时间嵌入层 (time_emb)
无时间关系嵌入层 (relation_no_time_emb)
静态实体和关系嵌入层 (entity_static_emb, relation_static_emb)
时间感知表示：
将关系表示分解为时间相关部分和时间无关部分
使用复数运算处理时间动态变化
规则集成：
支持多种逻辑规则 (rule1_p2, rule2_p1-p4)
通过规则损失将逻辑约束集成到模型训练中
得分函数：
动态得分：考虑时间因素的三元组得分
静态得分：不考虑时间因素的三元组得分
训练流程
损失函数：
交叉熵损失：用于分类预测
嵌入正则化：防止过拟合
时间正则化：保持时间连续性
规则正则化：确保模型符合逻辑规则
优化策略：
Adam 优化器
学习率调度：基于验证损失动态调整学习率
早停机制：防止过拟合
训练过程：
批量训练：支持大批次处理
验证评估：每个 epoch 后进行验证
模型保存：保存最佳验证性能的模型
