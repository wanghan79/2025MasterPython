# PBO（伪布尔优化）CDCL求解器项目说明

PS：这个正常来说是用C++实现的，目前用python实现，求解速度会慢很多，但是思想是一样的。

## 一、项目目标
本项目旨在实现一个简化版的PBO（Pseudo-Boolean Optimization）问题求解器，采用CDCL（冲突驱动子句学习）算法，能够自动求解0-1整数线性规划问题。项目适合组合优化、人工智能、运筹学等领域的学习和研究。

## 二、主要思路
- **PBO问题**是指目标函数和约束均为线性布尔表达式（0-1变量），常见于背包、调度、资源分配等问题。
- **CDCL算法**是现代SAT/PBO求解器的核心，具备高效的冲突分析、学习子句和智能回溯能力。
- 本项目通过面向对象设计，将PBO建模、变量管理、约束传播、冲突分析、分支限界等功能模块化，便于理解和扩展。

## 三、代码结构总览
- `homework_final.py`：主程序，包含所有类、算法实现和测试用例。
- `PBOVariable`：伪布尔变量（0-1变量），记录变量名、索引、赋值、决策层等信息。
- `PBOConstraint`：伪布尔约束，支持线性不等式的传播、冲突检测、松弛量计算等。
- `PBOObjective`：目标函数，支持线性加权求和。
- `PBOProblem`：PBO问题建模，支持变量、约束、目标函数的添加与管理。
- `VSIDS`：分支启发式，动态调整变量优先级。
- `CDCLSolver`：主求解器，实现CDCL主循环、单元传播、冲突分析、回溯、学习子句、目标界限推进等。
- 测试用例函数：`build_sample_problem`、`build_knapsack_problem`、`build_cover_problem`、`build_scheduling_problem`、`build_special_pb_constraint_problem`、`build_random_problem`。

## 四、测试样例说明与运行效果
运行 `python homework_final.py`，会自动依次测试以下问题：

1. **三变量互斥问题**
   - 目标：最大化 3x1 + 2x2 + x3，约束任意两个变量之和不超过1。
   - 输出：最优解、所有可行解、详细约束状态。
2. **背包问题**
   - 目标：最大化 6x1 + 10x2 + 12x3，约束 2x1 + 2x2 + 3x3 ≤ 5。
   - 输出：最优解、所有可行解。
3. **0-1覆盖问题**
   - 目标：最小化 x1 + x2 + x3，约束每对变量至少有一个为1。
   - 输出：最优解、所有可行解。
4. **调度问题**
   - 目标：3个任务分配给2台机器，每台机器最多1个任务。
   - 输出：最优解、所有可行解。
5. **特殊伪布尔约束问题**
   - 目标：最大化 x1 + x2 + x3，约束 2x1 + 2x2 + 2x3 ≤ 3。
   - 输出：最优解、所有可行解。
6. **随机PBO问题**
   - 随机生成变量和约束，测试算法健壮性。
   - 输出：最优解。

**运行效果举例：**
```
【示例1：三变量互斥问题】
PBO问题结构：
变量： ['x1', 'x2', 'x3']
目标函数： max: 3*x0 + 2*x1 + 1*x2
约束：
   1*x0 + 1*x1 <= 1
   1*x1 + 1*x2 <= 1
   1*x0 + 1*x2 <= 1
最优解： 3
模型： {'x1': 1, 'x2': 0, 'x3': 0}
所有可行解（最多展示10个）：
{'x1': 1, 'x2': 0, 'x3': 0} 目标值: 3
...
共找到4个可行解（可能未穷尽）
```

## 五、如何自定义PBO问题
1. 打开 `homework_final.py`，找到 `main()` 函数。
2. 仿照已有的 `build_sample_problem()` 等函数，自定义变量、目标函数和约束。
3. 调用你的新问题并运行即可。

**示例：**
```python
pb = PBOProblem()
pb.add_variable('y1')
pb.add_variable('y2')
pb.set_objective({'y1': 5, 'y2': 7})
pb.add_constraint({'y1': 2, 'y2': 1}, 3)
solver = CDCLSolver(pb)
solver.solve()
```
